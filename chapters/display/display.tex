% \chapter{Liquidification of property}



% \section{Motivation}

% Hundreds of million people globally lack access to energy. Grids are unreliable and last mile connection costs can be inhibitive. Off-grid energy technologies of various sizes are being made available by private companies as well non-profit organizations. In terms of scale, the most important technology are Solar Home Systems (SHS)

% A SHS is composed of a small solar panel, a battery, LED lights, and USB charging. The capacity of the system ranges typically between 10 and 250 Watt. Larger systems typically comprise fans and TVs. Small systems can be installed by the user but larger systems need a technician.

% World market production of solar panels focuses on a module size of 250 Watt. Hence the price per Watt is lowest for 250 Watt modules. However, 250 Watt exceed the typical demand of a rural off-grid household. Thus micro-utility (c.f. Grameen Shakti) and peer-to-peer microgrids (c.f. uLink) models are appealing. In these models a local entrepreneur shares the generated electricity with her neighbors. Therefore, energy consumption should be able to be metered and the local entrepreneur needs to collect payments.

% People that are in need of SHSs are typically at the bottom of the pyramid. They lack the capital to buy a SHS and have no access to traditional financing. Innovative financing schemes that are based on mobile payments and the ability to remote disable the system have been developed to bring those systems to more poor households. These schemes can be divided in two main categories: Pay-for-service and lease-to-own. In the pay-for-service model the SHS manufacturer is the owner of the system and the user pays has to pay fee for its usage. If the user does not pay electricity access is turned off and after some time the system gets taken back. In the lease-to-own model the user also has to pay for the usage but she also pays a principal so that at some point the ownership gets transferred to her and the system gets permanently unlocked. 

% A prominent example for the lease-to-own model is M-Kopa which operates in East Africa. M-Kopa offers also that the user may switch back to the lease-to-own model after the user has fully paid the system in order to get financing for some other product. Notably, the user does not get a loan to buy a product somewhere but she gets a product that is distributed by M-Kopa. 

% Companies like M-Kopa need large capital in order to finance the distribution of their systems. Besides debt and equity financing some companies have securitized their implicit loans to users. This practice is however only viable for the larger companies that already have reached some scale. 



% \cite{gsma2014} gives a good overview of energy access in sub-saharan africa. Discusses solar home systems, mini-grids, and on-grid systems. Stresses the role of cellular connectivity and pay-as-you-go models. According to the report around 40\% of on-grid energy gets stolen. Furthermore, they provide a graph on the evolution of electrification rate and the rate for cellular coverage.

% \cite{DBLP:journals/corr/QadirSWC16} discuss the approach of resource pooling for wireless networks in the developing world. This could be used if providing connectivity to villages is implemented as an additional service by the DAO.


\chapter{Smart property as a joint-stock business entity}

\section{Introduction}

Joint-stock companies were invented to share risk and rewards between shareholders in order to finance large-scale commercial endeavors. One of the first joint-stock companies were the Dutch and the British East India Companies. Large amounts of capital were necessary to finance the construction of ships, hire crews, and establish colonies to initiate trading. In short, joint-stock companies enabled corporations on an unprecedented scale. Shares of stock represent  ownership of the business entity. Bearers of these shares are entitled to participate in specific decisions by means of voting, and are entitled to receive dividends. 

However, joint-stock companies are heavily regulated and require complex and expensive auditing processes in order to protect shareholders from fraud and opaque mismanagement. This leads to high initial and operational costs which have to be weight against the benefits

Cryptocurrencies and automated contract enforcement allow to apply similar concepts to endeavors of much smaller scale. First 
\section{Motivation}

Starting as an Uber driver in Mexico City or as a solar micro-utility provider in rural India does require relatively little capital in comparison to traditional joint-stock companies. 
Nevertheless, financing a car or a solar home system can be challenging. In particular in countries with an underdeveloped financial services infrastructure and limited legal enforceability. This high risk for investors translated into high interest rates for local micro entrepreneurs. 

Innovative start ups like M-Kopa\footnote{http://www.m-kopa.com/} or Bboxx\footnote{http://www.bboxx.co.uk/} already leverage Internet of Things technology and mobile payments in order to decrease default rates and thus enable lower interest rates. Solar Home Systems are offered in pay-as-you-go and lease-to-own models, requiring low upfront investments. The systems are equipped with SIM cards, in order to allow remote monitoring, and remote disablement. If a customer does not comply with the agreed payment plan, the system gets deactivated until the payment is made. 

In this model the risk is centered on the solar home system provider which has to attract debt and equity financing in order to advance funding. Therefore, spreading risk from the top.

Alternatively, we can spread the risk from the bottom up, by interpreting every smart home system as a micro joint-stock business entity.

% Notes for further discussion
% Issuance policy for additional revenue-based shares to keep the operator incentivized to keep a high revenue stream.
% Locking operator shares at least  for a specific time. Such that the operator keeps skin in the game.
% On-demand Liquidation
% In principle it is the transformation of a collateral-based loan to a cashflow-based loan, isn't it? What are the implications?
% Trade of between enforcement by law/legal system and enforcement by architecture/code
% What happens in case of defects/maintenance?


\section{General Model}

In the general model we consider a smart property that is able to provide some form of service. The smart object should be able to refuse providing the service. In the case of the solar home system the service is the provision of energy. In the case of a display or screen it may be the presentation of designated content. The smart property will act as an autonomous business entity, such that is able to issue tokens representing shares. The tokens entitle the respective bearer to claim a share of the revenue the smart property is generating by providing the service. Depending on the smart property and the particular tokens may also entitle to participate in decision processes.

In the following we will present the model by discussing the participating stakeholders, their roles, and the system in which they interact. We will use the terms property, product and device synonymously. 

\subsection{Stakeholders}

\subsubsection{Manufacturer}

The manufacturer is the producer and initial owner of the smart property.

\subsubsection{Operator}

The operator has the desire to own the smart property, but lacks the necessary capital. The operator will be incentivized to maintain the smart property.

\subsubsection{Investors}

Investors provide the capital to deploy the smart property. In return, they receive shares that entitle them collect dividends. Furthermore, they might be able to interfere witch decisions of the operator in a voting process.

\subsubsection{Customers}

Customers are individuals or software agents that pay for the service provided by the smart property.

\subsection{Description}

We start with the situation that there is a prospective operator of a smart property. The operator, however, does not have enough capital to buy the smart property for the price $p_property$ which the manufacturer demands. Instead, the operator and the manufacturer create a human- and machine- readable contract which defines the price of service provision $p_service$ and and details of share issuance. The manufacturer is interested in recouping at least most of $p_property$ immediately in order to keep capitalized to build more products. Therefore, $p_property$ is divided into $N$ shares $s_i$ $i \in {1,..,N}$. The operator has to purchase at least a specified number $n$ of shares, comparable to a down payment. The rest is offered to the public in form of a \emph{crowdsale}. The manufacturer may buy shares itself. 

In contrast to traditional shares, additional shares are being issues based on revenue. These shares are awarded to the operator. Thereby, over time, outside investors get diluted and the operator becomes the de-facto owner of the property. The rate of dilution is specified in the contract and transparent to investors.

\begin{figure}[!t]
    \centering
    \includegraphics[width=\linewidth]{./externalized/jointstock}
    \caption{Stakeholders and their primary roles in the model.}
    \label{fig:smartproperty}
  \end{figure}

\section{Implementation}

In the following we will discuss implementations based on Bitcoin and based on Ethereum. We will see that the implementation in Bitcoin has several limitations. This leads to an actual implementation of a prototype using Ethereum.

\subsection{Bitcoin}

\subsubsection{Smart Property}

The device has to be provisioned with an ECDSA private key during the manufacturing process.
The manufacturer may additionally provide a certificate claiming the provenance of the device and its public key.

\subsubsection{Contract}

The actual contract is represented by a signed JSON document as illustrated in Figure \ref{lst:contract}. The document is created by the manufacturer, and  signed and transferred to the device. The device adds its signature. This concludes the provisioning process. The device is now ready to issue shares.

\begin{figure}
\label{lst:contract}
\begin{lstlisting}[breaklines]
	price_service: 100000,
	payment_address: ,
	issuance_rate: ,
	payment_date: 'last sunday'
\end{lstlisting}
\caption{Example of the content of an authenticated JSON document representing the joint-stock property contract. The signature corresponds to the share issuance key. The contract will be enforced by the property itself.}
\end{figure}


\subsubsection{Shares}

Shares in Bitcoin can be represented by colored coins (c.f. \ref{sec:coloredcoins}). It is necessary that additional shares can be issued after the initial issuance. The Open Assets specification allows to issue new coins of the same \emph{color} at any time by using the original issuance key. The Colu specification allows to choose between \emph{locked} and \emph{unlocked} coins. Unlocked coins correspond to coins that allow issuance of additional units.

Initially the shares get partially awarded to the manufacturer and the operator according to the down payment.

\subsubsection{Crowdsale}

The shares, represented as colored coins on the Bitcoin blockchain, can be readily offered on the global market. Potential investors are able to verify that the shares correspond to a particular device and a particular contract by verifying the signatures. Trading of shares in exchange for bitcoins is done via trustless atomic transactions. Trading in exchange for other cryptocurrencies can be done via trustless atomic cross-chain trading \parencite{atomiccrosschaintrading}.

\subsubsection{Payments and Dividends}

Consuming a service provided the property requires paying a fee specified in the contract. The fee may be time-based based on individual service provision. Different services or different payment plans can be implemented by using different bitcoin addresses. When a consumer pays the address the service is either directly provisioned, or the product accepts commands signed by the payer for the paid time period.

The property may accept payments by relying on SPV proofs only. The inherent long payment confirmation times can be circumvented by either using some form of payment channels as discussed extensively in Chapter \ref{sec:m2m}, or by relying on zero confirmation payments.

In order to payout dividends, the property has to infer the current shareholders. Therefore, the property has to keep track of the colored coin trades. In principle, the property could create a transaction after each payment that distributes the payment to the shareholders. In practice, however, the viability of these \emph{real-time payouts} would depend on the size of the payment and the number of shareholders. Each shareholder increases the size of the transaction by an additional output. Furthermore, depending on the respective share, certain shareholders may end up with tiny outputs that would be expensive to spend or aggregate later.
Payment channels to shareholders are no viable alternative, since the payment channels would have to be funded by the property initially, but it lacks the funds to do so. Thus, the property should execute scheduled payouts periodically depending on its expected revenue and the number of shareholders to keep a balance between transaction costs, low value outputs, and accumulation of payments.

\subsubsection{External shareholder dilution}
As specified in the contract, based on the revenue, additional shares are issued and awarded to the operator. This will be executed by the device itself by creating and broadcasting a colored coins issuance transaction.

\subsection{Ethereum}

In Ethereum, we are able to augment the device with a smart contract on the blockchain. Therefore, the physical device does not need to possess keys that control funds or shares. 

Share issuance, payments, and dividend payouts can all be handled in a single smart contract.

\subsubsection{Shares}

Shares are represented as tokens. We base the smart contract on the standard token contract\footnote{https://github.com/ConsenSys/Tokens/blob/master/Token\_Contracts/contracts/StandardToken.sol}. The token contract is essentially a simple accounting system that maps account numbers to values, i.e. the number of \emph{tokens} an account owns. A transfer method then allows an account owner to debit its balance and credit another.

\subsubsection{Crowdsale}

Initial share allocation can be done with an adapted crowdsale contract\footnote{https://www.ethereum.org/crowdsale}. The amount of initial shares is fixed and corresponds to the property price $p_property$. A certain amount of shares need to be bought by the operator as a down payment. Revenue of the crowdsale is sent to the manufacturer. 

\subsubsection{Payments, Dividends and Dilution}

Payments have to be made to the contract by calling a pay function with the payment attached. The pay function takes care of crediting the shareholder accounts with dividends, and issues new shares to the operator according to

\begin{equation*}
\delta s = payment * r_{shares} 
\end{equation*}

where $r_{shares}$ is the share issuance rate per paid wei, the smallest unit of account in Ethereum. This rate is fixed in the constructor of the contract and is assumed to be constant.

\begin{figure}
\label{lst:payfunction}
\begin{lstlisting}[breaklines]
Credit operator with potential maintenance fee
Credit shareholders with (payment - fee)/number of shareholders
Issue and allocate new shares based on payment to operator
\end{lstlisting}
\caption{Description of the pay function. This function is called by a service consumer. Function calls in Ethereum are transactions to a contract with attached data. The payment amount is given by the value attached to the transaction.}
\end{figure}

Since share issuance is handled within the contract handling payments, the overhead is low. There is no need for an additional transaction, but only an update of the token balance. Thus, there is no need to aggregate payments until a certain threshold before the operator gets credited with additional shares. 

Noteworthy, there are two possibilities to pay dividends to shareholders. The obvious approach would be to let the contract actively send dividends to the shareholders accounts. However, sending is comparably expensive, and the cost would have to be borne by the payer. Hence, the contract keeps track of the dividend balances and we add a \emph{withdraw} function. The withdraw function allows shareholders to collect their dividends whenever they wish. Thereby, costs for withdrawing have to be borne by the withdrawing shareholder, and shareholders may decide themselves when collecting dividends is appropriate. 

\subsection{Comparison}

The expressiveness and statefulness of the Ethereum scripting language provides much more flexibility for the implementation. All functionality that handles payments, shares, and dividends can be implemented directly in the smart contract. The physical property itself needs  only be aware of a payment and the address of the payer in order to provide the service. In particular, the property does not need to handle cryptographic keys that control funds or shares.

The Bitcoin implementation, in contrast, involves much more trust in the physical property itself.
Distribution of dividends and dilution of shares is controlled by cryptographic keys on the device. Access to these keys has to be prevented not only from remote attacks, but also from local attacks, since the operator would benefit from access. Thus, the device needs tamper-resistant hardware to store cryptographic keys and provide signatures.
 
\section{Case: Public Display}

We implemented the model for the use case of a public display

\section{Further Applications}

\subsection{Autonomous cars}

\subsection{Renewable energy generation}


\section{Discussion}

\subsection{}

\subsection{Legal Issues}
We presented a concept of \emph{autonomous} property considered as a business entity that has contractual relationships with investors, an operator and potential service consumers. The property itself, in the Bitcoin implementation, or the corresponding smart contract, in the Ethereum implementation, issues tokens that can be interpreted as shares, and accepts and distributes payments. We chose this language in order to emphasize the correspondence to a traditional joint-stock company. These terms have a particular legal significance and can not transferred to this scenario without limitations. We do not consider the legal issues and implications which vary between jurisdication, but consider only the contractual terms as specified in the document which will be executed by the property.